# 🌟 功能特性详解

## 📝 内容编辑功能

### Markdown 支持
支持完整的 Markdown 语法，包括：

```markdown
# 一级标题
## 二级标题
### 三级标题

**粗体文本** *斜体文本* ~~删除线~~

- 无序列表项 1
- 无序列表项 2

1. 有序列表项 1
2. 有序列表项 2

> 引用文本
> 支持多行引用

`行内代码`

```代码块
function hello() {
    console.log("Hello World!");
}
```

[链接文本](https://example.com)

![图片描述](https://example.com/image.jpg)
```

### 🎨 链接样式优化
- **高对比度显示** - 使用明亮的青蓝色 (#00d4ff) 确保在深色背景下清晰可见
- **悬停效果** - 鼠标悬停时显示发光效果和微动画
- **访问状态** - 已访问链接使用明亮粉色 (#ff6b9d) 进行区分
- **全面覆盖** - 主页面和管理员面板的所有链接都已优化

### LaTeX 数学公式
支持完整的 LaTeX 数学公式渲染：

**行内公式：**
- `$E = mc^2$` → $E = mc^2$
- `$\pi \approx 3.14159$` → $\pi \approx 3.14159$
- `$\sqrt{x^2 + y^2}$` → $\sqrt{x^2 + y^2}$

**块级公式：**
```latex
$$\sum_{i=1}^{n} x_i = x_1 + x_2 + \cdots + x_n$$

$$\int_{0}^{\infty} e^{-x} dx = 1$$

$$\begin{pmatrix} a & b \\ c & d \end{pmatrix}$$

$$\frac{\partial f}{\partial x} = \lim_{h \to 0} \frac{f(x+h) - f(x)}{h}$$
```

## 🔍 搜索功能

### 智能搜索
- **文本搜索** - 搜索剪贴板内容中的任意文本
- **备注搜索** - 同时搜索条目的备注信息
- **实时过滤** - 输入时即时显示搜索结果
- **计数显示** - 显示匹配结果数量，如 `3/10`

### 使用方法
1. 在搜索框中输入关键词
2. 系统自动过滤显示匹配的条目
3. 清空搜索框显示所有条目

## 📊 数据管理

### 导出功能
- **双重导出** - 前端和管理员面板都提供导出功能
- **一键导出** - 点击导出按钮即可下载所有数据
- **JSON 格式** - 标准 JSON 格式，便于备份和迁移
- **完整数据** - 包含文本、备注、时间、状态、IP 等所有信息
- **文件命名** - 自动生成带日期的文件名

### 导入功能（管理员专用）
- **粘贴导入** - 直接粘贴 JSON 数据进行导入
- **文件导入** - 上传 JSON 文件进行批量导入
- **合并选项** - 可选择合并数据或覆盖现有数据
- **重复检测** - 自动跳过重复条目
- **预览功能** - 导入前预览数据内容

### 导出数据结构
```json
{
  "exportTime": "2024-01-01T12:00:00.000Z",
  "totalEntries": 10,
  "entries": [
    {
      "id": "unique-id",
      "text": "剪贴板内容",
      "note": "备注信息",
      "time": "2024-01-01 12:00:00",
      "pinned": false,
      "hidden": false,
      "ipv4": "192.168.1.1",
      "ipv6": "::"
    }
  ]
}
```

### 批量清理
- **清理隐藏条目** - 一键删除所有隐藏的条目
- **清空所有数据** - 双重确认后清空所有剪贴板数据
- **安全确认** - 危险操作需要多次确认

## 📱 移动端优化

### 响应式设计
- **自适应布局** - 完美适配手机、平板、桌面设备
- **触摸友好** - 按钮大小适合触摸操作
- **文本处理** - 智能换行，防止内容溢出
- **网格布局** - 移动端按钮采用网格布局，节省空间

### 移动端特性
- **双列按钮** - 小屏幕设备上按钮排列为 2x2 网格
- **字体缩放** - 根据屏幕大小自动调整字体大小
- **间距优化** - 适合手指操作的按钮间距
- **滚动优化** - 流畅的滚动体验

## ⚡ 性能优化

### 智能重试机制
解决 Cloudflare Workers 冷启动问题：

1. **指数退避** - 重试间隔逐渐增加（1s, 2s, 4s）
2. **最大重试** - 最多重试 3 次
3. **状态提示** - 显示当前重试进度
4. **友好提示** - 解释冷启动需要时间

### 错误处理
- **网络错误** - 自动重试网络请求
- **渲染错误** - Markdown/LaTeX 渲染失败时降级显示
- **用户提示** - 清晰的错误信息和解决建议

## 🎯 实用工具

### 字符统计
- **实时统计** - 输入时即时显示字符数量
- **颜色提示** - 根据长度变化颜色
  - 绿色：正常长度（< 2000 字符）
  - 橙色：较长内容（2000-5000 字符）
  - 红色：超长内容（> 5000 字符）

### 快捷键支持
- **Ctrl + Enter** - 快速保存当前内容
- **Ctrl + R** - 刷新页面重新加载数据
- **Esc** - 取消当前操作

## 🛡️ 安全特性

### XSS 防护
- **DOMPurify** - 使用 DOMPurify 库清理 HTML 内容
- **脚本过滤** - 自动检测和拒绝包含 `<script>` 标签的内容
- **HTML 转义** - 对用户输入进行 HTML 转义处理
- **安全渲染** - 确保用户输入安全显示

### 访问控制
- **双重密码保护** - 网站访问密码 + 管理员密码
- **会话令牌** - 使用安全的会话令牌替代密码传输
- **会话过期** - 会话令牌 24 小时自动过期
- **多设备管理** - 支持查看和管理多个登录会话
- **强制退出** - 管理员可强制退出所有设备

### 频率限制
- **请求限制** - 防止恶意请求和滥用
- **可配置策略** - 支持自定义限制参数
- **IP 追踪** - 记录操作来源便于安全审计

### 输入验证
- **长度限制** - 限制输入内容的最大长度
- **内容检查** - 检查是否包含恶意代码
- **数据清理** - 自动清理和转义用户输入

## 🔧 管理功能

### 条目管理
- **置顶功能** - 重要内容可置顶显示，带 📌 标识
- **隐藏功能** - 敏感内容可隐藏，复制时显示占位符 "🔒 内容已隐藏"
- **备注功能** - 为每条记录添加说明备注，支持搜索
- **删除功能** - 单条删除，需要确认操作
- **IP 追踪** - 记录每条数据的提交 IP 地址

### 管理员面板
访问 `/admin` 进入管理后台：

#### 📊 系统统计
- **总条目数** - 显示所有剪贴板条目总数
- **置顶条目** - 显示当前置顶的条目数量
- **隐藏条目** - 显示当前隐藏的条目数量
- **带备注条目** - 显示包含备注的条目数量

#### 🔐 安全配置
- **访问密码保护** - 开关控制网站访问密码
- **管理员密码状态** - 显示管理员密码配置状态
- **环境变量提示** - 指导用户在 Cloudflare Dashboard 中配置

#### 🔐 会话管理
- **活跃会话查看** - 显示所有登录的管理员会话
- **会话详情** - 显示登录时间、IP 地址、用户代理
- **强制退出** - 可以强制退出所有设备的登录会话
- **当前会话标识** - 高亮显示当前会话

#### ⚙️ 系统配置
- **频率限制配置** - 设置最大请求数和时间窗口
- **实时配置提示** - 说明需要在 Cloudflare Dashboard 中更新

#### 📝 数据管理
- **数据刷新** - 重新加载所有条目数据
- **数据导出** - 导出所有数据为 JSON 格式
- **数据导入** - 支持粘贴和文件两种导入方式
- **批量清理** - 清理隐藏条目或清空所有数据
- **条目详情** - 显示每条数据的完整信息（包括 IP）

## 🌐 API 接口

### 公共接口
- `GET /` - 主页面
- `GET /admin` - 管理员登录/面板页面
- `POST /api/verify-access` - 验证网站访问密码
- `GET /api/entries` - 获取可见的剪贴板条目
- `POST /api/save` - 保存新的剪贴板条目
- `POST /api/delete` - 删除指定条目
- `POST /api/hide` - 隐藏/显示指定条目
- `POST /api/pin` - 置顶/取消置顶指定条目

### 管理员接口（需要认证）
- `POST /api/admin/login` - 管理员登录
- `GET /api/admin/entries` - 获取所有条目（包括隐藏）
- `POST /api/admin/config` - 更新系统配置
- `POST /api/admin/entry` - 管理员操作条目
- `POST /api/admin/import` - 导入数据
- `POST /api/admin/clear` - 清理数据
- `POST /api/admin/logout-all` - 退出所有设备
- `GET /api/admin/sessions` - 获取活跃会话

### 认证机制
- **会话令牌** - 登录后生成唯一会话令牌
- **Bearer Token** - 使用 `Authorization: Bearer <token>` 头部认证
- **Cookie 支持** - 同时支持 Cookie 方式存储令牌
- **自动过期** - 会话令牌 24 小时后自动失效

## 🌐 部署特性

### 多种部署方式
1. **Cloudflare Pages** - 零配置，GitHub 自动部署
2. **Cloudflare Workers** - 直接部署到边缘计算
3. **本地开发** - 无需配置即可本地运行

### 全球加速
- **边缘计算** - 基于 Cloudflare 全球网络
- **自动缓存** - 静态资源自动缓存
- **SSL 加密** - 免费 SSL 证书保护数据传输
- **KV 存储** - 全球分布式键值存储

---

**🎉 体验现代化的剪贴板管理，让内容分享更简单！**
